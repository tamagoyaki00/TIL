## 2025-08-08学習記録
学習時間7.6時間（総合学習時間745.9）

TODO
- [x] コメント機能
- [x] コメント編集・削除
- [ ] テストコード途中
  

## 学び
ルーティングをネストしたときのform_withは
``<%= form_with model: [@question, opinion] do |f| %>``
こうすることで、`<%= form_with model: opinion, url: question_opinions_path(@question) do |f| %>`と同等の意味になる。

AIに確認しながら実装をおこなっていたが、turboにも慣れてきて、私の場合はこうだからそれはこうではないですか？など聞き返せるようになってきた。
Rails基礎の復習にもなった。  
最初は_opinion.html.erbをコメントの一覧用のパーシャルとして認識していた。（パーシャル内で<% opinions.each do |opinion| %>を使っていた）が、そうするとturbo_stream.prependではコメント１つを追加するものなので、ここでエラーが起こってしまう。
なので呼び出し側を`<%= render @opinions %>`このようにして繰り返すようにする。

★復習
```
#これらはすべて同じ意味
<%= render @opinions %>

<%= render partial: 'opinion', collection: @opinions %>

<% @opinions.each do |opinion| %>
  <%= render 'opinion', locals: { opinion: opinion } %>
<% end %>
```