## 2025-09-19学習記録
学習時間1.8時間（総合学習時間947.2）

TO DO
- [x] 通知設定のビュー


PCが本日届いたので、勉強再開！

通知設定のビューを実装したときの学び。  
実装したいこと：日記の投稿時間をリマインド。日記の投稿を、ルーティングに組み込んでほしいので、利用シーン（例：就寝前など）と通知時間の設定ができる。利用シーンは事前に用意してあるものと、カスタマイズで選ぶことができる。

初めは、プリセットとカスタマイズでラジオボタンを用意。選んだほうのフォームが表示され、選ばれていないほうはstimulusでhiddenクラスを付与する。としていたが、
これだと、見た目は問題ないが、値がうまく送信されませんでした！

理由としては、通知時間もシーン名もプリセット、カスタマイズそれぞれの<div>内にあり、フォームが重複していたからです。
またブラウザの仕様上、hiddenまたはdisplay: noneが適用されたフォーム要素は、送信時にその値が無視されてしまいます。
上記２点が原因で、時間を設定しても値が入らなかったり、プリセットの利用シーンを選んでもパラメーターは空欄でした。
### 解決方法

通知時間は共通項目としてそれぞれの<div>外に設置しました。これにより、ユーザーの選択に関わらず、このフィールドは常に表示され、常に値が送信されるようになりました。  
シーン名はプリセットで用意されているものとユーザーが入力できるカスタマイズなので共通化はできません。
そのため、Stimulusコントローラーを修正し、選択されていない方のフィールドに**disabled属性**を動的に追加するようにしました。disabled属性は、フォーム要素を無効化するHTMLの標準機能です。
無効化されたフィールドは、hiddenになったフィールドと同様に送信時に値が無視されます。
これで、選択された方のscene_nameの値だけが送信されるようになり、意図しないデータの重複や欠落を防ぐことができ、想定通りの挙動になりました！