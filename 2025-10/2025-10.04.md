## 2025-10-01学習記録
学習時間5時間（総合学習時間1021.4）

TO DO
- [x] ダークモードの切り替え
- [x] 入力必須項目に*を付ける

## 学び
ダークモードの切り替え時に、daisyuiのテーマの切り替えを使えば簡単に実装できると思っていたのですが、現実問題そんなことはありませんでした。  
ダークモードの切り替え自体は簡単に実装できたのですが、いざ、ダークモードにすると、色味が変な個所が多くそれを修正するのに時間がかかりました。  
以前、この戦いを終わらせに来たのときに、`dark:`を使えば、ダークモード時のCSSが当てられるという記憶があったので、
`bg-white`など指定しているところに`dark:bg-base-200`を追加して修正していこう！とおもってやってみると反映されない・・・。  
daisyUIのテーマの切り替えはdata-theme="light" や data-theme="dark" のように 属性でテーマを切り替える仕組みなので`dark:`をつけてもテーマの切り替えには反応しないそうです。
なので、既存のテーマの配色を少し変えて、テーマの切り替えで変わるようにbg-base-200などに書き直してという作業になりました。  
最初からダークモード対応をdaisyuiのテーマの切り替えで実装しようとおもっているのであれば、直接指定している色はテーマを切り替えてもその色になるので、その想定で色を決めるか、`bg-base-200`のようにdaisyUI のテーマ属性を使うのをオススメします！


また、ダークモードの切り替えを実装したときに、ページ遷移や・リロードをしてもテーマが保持されるようにStimulusでローカルストレージにテーマを保存しました。
そのときに、クッキーと何が違うの？開発者ツール→アプリケーション→ローカルストレージを確認したときにセッションストレージってあったけど何が違うの？という疑問にAIに答えてもらいました。
sessionとsessionStorageは別物なので注意。

| 項目         | Cookie | localStorage | sessionStorage |
|--------------|--------|--------------|----------------|
| 保存容量     | 約4KBまで | 5〜10MB程度 | 5〜10MB程度 |
| 保存期間     | 有効期限を設定可能（セッション終了時まで or 任意の日時） | 明示的に削除しない限り半永久的に残る | タブやウィンドウを閉じると消える |
| サーバー送信 | **毎回リクエストに自動で含まれる** | 自動送信されない（JSで必要なときに送る） | 自動送信されない（JSで必要なときに送る） |
| セキュリティ | `HttpOnly` / `Secure` / `SameSite` など属性で制御可能 | セキュリティ属性なし。XSS攻撃で盗まれるリスクあり | セキュリティ属性なし。XSS攻撃で盗まれるリスクあり |
| 主な用途     | セッション管理（ログイン状態保持など） | UI状態保存、テーマ設定、フォーム一時保存など | 一時的なデータ保持（ページ遷移間の状態管理など） |
- Cookie → サーバーとやり取りする必要があるデータ（ログイン状態など）
- localStorage → 長期的に保持したいクライアント側データ（テーマ設定など）
- sessionStorage → タブを閉じたら消えてよい一時データ（検索条件や一時的な入力内容など）
